javascript:(function(){for (var i = 1; i < 99999; i++) window.clearInterval(i);function randomColor(){ return '#'+Math.floor(Math.random()*16777215).toString(16); } var AUTODISP=confirm('auto-display images?');var SCRAMBLERANKS=true; var censorList = ["userstoCensor", "commaseparated", "guestsneedthissymbolðŸ‘¤"], cl = [] /* censor keys */;var ula = [] /* user keys */, cla = [] /*colors*/, rla=[] /*ranks*/; var histobase = ['9d','8d','7d','6d','5d','4d','3d','2d','1d','1k','2k','3k','4k','5k','6k','7k','8k','9k','10k','11k','12k','13k','14k','15k','16k','17k','18k','19k','20k','21k','22k','23k','24k','25k','26k','27k','28k','29k','30k'];function randomrank(){ return histobase[Math.floor(Math.random()*39)]} ; const imageURL="https://wp.technologyreview.com/wp-content/uploads/2019/05/hubble-telescope-nasa-10.jpg";var r = /(?:(?:https?|ftp|file):\/\/|www\.|ftp\.)(?:\([-A-Z0-9+&@#\/%=~_|$?!:,.]*\)|[-A-Z0-9+&@#\/%=~_|$?!:,.])*(?:\([-A-Z0-9+&@#\/%=~_|$?!:,.]*\)|[A-Z0-9+&@#\/%=~_|$])/igm; var ul = document.getElementsByClassName('UserList-item'); for(il = 0; il < ul.length ; il++){ utocensor = ul[il].firstElementChild.firstElementChild.innerText;utocensorm = utocensor.split(" [")[0];if(censorList.indexOf(utocensorm)> 0) cl.push(utocensorm);}console.log(cl); for(il1 = 0; il1 < ul.length ; il1++){ rla.push(randomrank());ula.push(ul[il1].innerText.split("]")[0]);if(cl.indexOf(ul[il1].innerText.split("]")[0].split(" [")[0])>=0){cla.push('#333');}else{cla.push(randomColor());}}console.log(rla);var g=function(){if(document.getElementsByClassName("UserChat").length>0)document.getElementsByClassName("UserChat")[0].style.background="darkslategrey";var ul = document.getElementsByClassName('RoomChat-messages');if(ul.length>0){ul[0].style.backgroundImage="URL("+imageURL+")";var side = document.getElementsByClassName('RoomChat-sidebar');side[0].style.background='lightgray';}var li = document.getElementsByClassName('ChatMessages-item'); for(ulai = 0; ulai < ula.length ; ulai++) for(il2 = 0; il2 < li.length ; il2++){/* !bold announcements */if(li[il2].children[0].children[1].innerText.startsWith('!'))li[il2].children[0].children[1].style.fontWeight='bold';if(li[il2].children[0].children[1].innerText.startsWith(','))li[il2].children[0].children[1].style.fontStyle='italic';if(li[il2].children[0].children[1].innerText.startsWith('_'))li[il2].children[0].children[1].style.textDecoration='underline';if(li[il2].innerText.substr(0,14).includes( ula[ulai] )){ /* use color */ li[il2].firstElementChild.style.background = cla[ulai];if(SCRAMBLERANKS)li[il2].firstElementChild.firstElementChild.firstElementChild.firstElementChild.innerHTML = li[il2].innerText.split(" [")[0] + " [" + rla[ulai] + "]"; }};/*expand image */for(il2 = 0; il2 < li.length ; il2++){/* prevent images from censored users */clmpass=true;for(clj=0;clj<cl.length;clj++)if(li[il2].innerText.startsWith(cl[clj]))clmpass=false;if(r.test(li[il2].innerText) && li[il2].childElementCount == 2 && clmpass && AUTODISP){function dispImg(purl,pelm){var cont =  pelm.parentElement;i3 = document.createElement('img');i3.src = purl;i3.width = '200';i3.style='border-radius: 5px;';i3.onclick=function(event){this.src=''};d3 = document.createElement('div');d3.style='margin-left:30px; margin-top:8px';d3.appendChild(i3);pelm.appendChild(d3);};let srcurl = li[il2].innerText.match(r)[0];if( srcurl.endsWith('.png') || srcurl.endsWith('.jpg') ||srcurl.endsWith('.jpeg') || srcurl.endsWith('.gif') || srcurl.endsWith('.bmp'))dispImg(srcurl, li[il2]);/*YT img*/if(srcurl.startsWith('https://www.youtube.com/watch?'))dispImg('https://img.youtube.com/vi/'+ srcurl.split('https://www.youtube.com/watch?v=')[1].split('&')[0] +'/hqdefault.jpg', li[il2]); /* https://youtu.be*/ if(srcurl.startsWith('https://youtu.be/'))dispImg('https://img.youtube.com/vi/'+ srcurl.split('youtu.be/')[1] +'/hqdefault.jpg', li[il2]);}}; let a3=document.getElementsByClassName('UnseenBadge-minor');for(let ia3=0;ia3<a3.length;ia3++)a3[ia3].style.background='red'; let cuser='';let floodcount = 0;const MAXFLOOD = 3;let maxflood2 = MAXFLOOD + 1;for(il2 = 0; il2 < li.length ; il2++){ if(cuser==li[il2].firstElementChild.firstElementChild.innerText){ floodcount++;if(floodcount >= MAXFLOOD){if( floodcount >= maxflood2 ){ /*console.log('user ', cuser, ' is really flooding!')*/;li[il2].style.display = 'none';} else {li[il2].style.transform = "scale(0.65)";li[il2].style.marginLeft = "-18%";}}}else{cuser=li[il2].firstElementChild.firstElementChild.innerText;floodcount = 0; }}};g();setInterval(g, 2500);})();
